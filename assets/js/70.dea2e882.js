(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{441:function(e,n,t){"use strict";t.r(n);var o=t(44),a=Object(o.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"introduction-to-generics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-generics"}},[e._v("#")]),e._v(" Introduction to Generics")]),e._v(" "),t("blockquote",[t("p",[e._v("Generics create "),t("em",[e._v("parameterized types")]),e._v(": components that work across multiple types.")])]),e._v(" "),t("p",[e._v("The term “generic” means “pertaining or appropriate to large groups of classes.” The original intent of generics in programming languages was to provide the programmer maximum expressiveness when writing classes or functions, by loosening type constraints on those classes or functions.")]),e._v(" "),t("p",[e._v("One of the most compelling initial motivations for generics is to create collection classes, which you’ve seen in the "),t("code",[e._v("List")]),e._v("s, "),t("code",[e._v("Set")]),e._v("s and "),t("code",[e._v("Map")]),e._v("s used for the examples in this book. A collection is an object that holds other objects. Many programs require you to hold a group of objects while you use them, so collections are one of the most reusable of class libraries.")]),e._v(" "),t("p",[e._v("Let’s look at a class that holds a single object. This class specifies the exact type of that object:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// IntroGenerics/RigidHolder.kt\npackage introgenerics\nimport atomictest.eq\n\ndata class Automobile(val brand: String)\n\nclass RigidHolder(private val a: Automobile) {\n  fun getValue() = a\n}\n\nfun main() {\n  val holder = RigidHolder(Automobile("BMW"))\n  holder.getValue() eq\n    "Automobile(brand=BMW)"\n}\n')])])]),t("p",[t("code",[e._v("RigidHolder")]),e._v(" is not a particularly reusable tool; it can’t hold anything but an "),t("code",[e._v("Automobile")]),e._v(". We would prefer not to write a new type of holder for every different type. To achieve this, we use a "),t("em",[e._v("type parameter")]),e._v(" instead of "),t("code",[e._v("Automobile")]),e._v(".")]),e._v(" "),t("p",[e._v("To define a generic type, add angle brackets ("),t("code",[e._v("<>")]),e._v(") containing one or more generic placeholders and put this generic specification after the class name. Here, the generic placeholder "),t("code",[e._v("T")]),e._v(" represents the unknown type and is used within the class as if it were a regular type:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// IntroGenerics/GenericHolder.kt\npackage introgenerics\nimport atomictest.eq\n\nclass GenericHolder<T>(               // [1]\n  private val value: T\n) {\n  fun getValue(): T = value\n}\n\nfun main() {\n  val h1 = GenericHolder(Automobile("Ford"))\n  val a: Automobile = h1.getValue()   // [2]\n  a eq "Automobile(brand=Ford)"\n\n  val h2 = GenericHolder(1)\n  val i: Int = h2.getValue()          // [3]\n  i eq 1\n\n  val h3 = GenericHolder("Chartreuse")\n  val s: String = h3.getValue()       // [4]\n  s eq "Chartreuse"\n}\n')])])]),t("ul",[t("li",[t("strong",[e._v("[1]")]),e._v(" "),t("code",[e._v("GenericHolder")]),e._v(" stores a "),t("code",[e._v("T")]),e._v(", and its member function "),t("code",[e._v("getValue()")]),e._v(" returns a "),t("code",[e._v("T")]),e._v(".")])]),e._v(" "),t("p",[e._v("When you call "),t("code",[e._v("getValue()")]),e._v(" as in "),t("strong",[e._v("[2]")]),e._v(", "),t("strong",[e._v("[3]")]),e._v(" or "),t("strong",[e._v("[4]")]),e._v(" , the result is automatically the right type.")]),e._v(" "),t("p",[e._v("It seems like we might be able to solve this problem with a “universal type”—a type that is the parent of all other types. In Kotlin, this universal type is called "),t("code",[e._v("Any")]),e._v(". As the name implies, "),t("code",[e._v("Any")]),e._v(" allows any type of argument. If you want to pass a variety of types to a function and they have nothing in common, "),t("code",[e._v("Any")]),e._v(" solves the problem.")]),e._v(" "),t("p",[e._v("At a glance, it looks like we might be able to use "),t("code",[e._v("Any")]),e._v(" instead of "),t("code",[e._v("T")]),e._v(" in "),t("code",[e._v("GenericHolder.kt")]),e._v(":")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// IntroGenerics/AnyInstead.kt\npackage introgenerics\nimport atomictest.eq\n\nclass AnyHolder(private val value: Any) {\n  fun getValue(): Any = value\n}\n\nclass Dog {\n  fun bark() = "Ruff!"\n}\n\nfun main() {\n  val holder = AnyHolder(Dog())\n  val any = holder.getValue()\n  // Doesn\'t compile:\n  // any.bark()\n\n  val genericHolder = GenericHolder(Dog())\n  val dog = genericHolder.getValue()\n  dog.bark() eq "Ruff!"\n}\n')])])]),t("p",[t("code",[e._v("Any")]),e._v(" does in fact work for simple cases, but as soon as we need the specific type—to call "),t("code",[e._v("bark()")]),e._v(" for the "),t("code",[e._v("Dog")]),e._v("—it doesn’t work because we lose track of the fact that it’s a "),t("code",[e._v("Dog")]),e._v(" when it is assigned to the "),t("code",[e._v("Any")]),e._v(". When we pass a "),t("code",[e._v("Dog")]),e._v(" as an "),t("code",[e._v("Any")]),e._v(", the result is just an "),t("code",[e._v("Any")]),e._v(", which has no "),t("code",[e._v("bark()")]),e._v(".")]),e._v(" "),t("p",[e._v("Using generics retains the information that, in this case, we actually have a "),t("code",[e._v("Dog")]),e._v(", which means we can perform "),t("code",[e._v("Dog")]),e._v(" operations on the object returned by "),t("code",[e._v("getValue()")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"generic-functions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generic-functions"}},[e._v("#")]),e._v(" Generic Functions")]),e._v(" "),t("p",[e._v("To define a generic function, specify a generic type parameter in angle brackets "),t("em",[e._v("before")]),e._v(" the function name:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// IntroGenerics/GenericFunction.kt\npackage introgenerics\nimport atomictest.eq\n\nfun <T> identity(arg: T): T = arg\n\nfun main() {\n  identity("Yellow") eq "Yellow"\n  identity(1) eq 1\n  val d: Dog = identity(Dog())\n  d.bark() eq "Ruff!"\n}\n')])])]),t("p",[t("code",[e._v("d")]),e._v(" has type "),t("code",[e._v("Dog")]),e._v(" because "),t("code",[e._v("identity()")]),e._v(" is a generic function and returns a "),t("code",[e._v("T")]),e._v(".")]),e._v(" "),t("p",[e._v("The Kotlin standard library contains many generic extension functions for collections. To write a generic extension function, put the generic specification before the receiver. For example, notice how "),t("code",[e._v("first()")]),e._v(" and "),t("code",[e._v("firstOrNull()")]),e._v(" are defined:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// IntroGenerics/GenericListExtensions.kt\npackage introgenerics\nimport atomictest.eq\n\nfun <T> List<T>.first(): T {\n  if (isEmpty())\n    throw NoSuchElementException("Empty List")\n  return this[0]\n}\n\nfun <T> List<T>.firstOrNull(): T? =\n  if (isEmpty()) null else this[0]\n\nfun main() {\n  listOf(1, 2, 3).first() eq 1\n\n  val i: Int? =                     // [1]\n    listOf(1, 2, 3).firstOrNull()\n  i eq 1\n\n  val s: String? =                  // [2]\n    listOf<String>().firstOrNull()\n  s eq null\n}\n')])])]),t("p",[t("code",[e._v("first()")]),e._v(" and "),t("code",[e._v("firstOrNull()")]),e._v(" work with any kind of "),t("code",[e._v("List")]),e._v(". To return a "),t("code",[e._v("T")]),e._v(", they must be generic functions.")]),e._v(" "),t("p",[e._v("Notice how "),t("code",[e._v("firstOrNull()")]),e._v(" specifies a nullable return type. Line "),t("strong",[e._v("[1]")]),e._v(" shows that calling the function on "),t("code",[e._v("List<Int>")]),e._v(" returns the nullable type "),t("code",[e._v("Int?")]),e._v(". Line "),t("strong",[e._v("[2]")]),e._v(" shows that calling "),t("code",[e._v("firstOrNull()")]),e._v(" on "),t("code",[e._v("List<String>")]),e._v(" returns "),t("code",[e._v("String?")]),e._v(". Kotlin requires the "),t("code",[e._v("?")]),e._v(" on lines "),t("strong",[e._v("[1]")]),e._v(" and "),t("strong",[e._v("[2]")]),e._v("—take them out and see the error messages.")]),e._v(" "),t("p",[t("em",[t("strong",[e._v("Exercises and solutions can be found at www.AtomicKotlin.com.")])])])])}),[],!1,null,null,null);n.default=a.exports}}]);